input {
  file {
    path => "/var/log/application/*.log"  # Путь внутри контейнера
    start_position => "beginning"
    sincedb_path => "/dev/null"
    codec => "plain"  # или "json" если логи в JSON формате
  }
}

filter {
  # Парсинг стандартных логов (пример)
  grok {
     match => {
       "message" => "%{TIMESTAMP_ISO8601:timestamp} \[%{DATA:thread}\] %{LOGLEVEL:loglevel}\s+%{JAVACLASS:logger_name} - %{GREEDYDATA:clean_message}"
     }
  }

  # Преобразование timestamp
  date {
    match => [ "timestamp", "ISO8601" ]
    target => "@timestamp"
  }

  # Добавление метаданных
  mutate {
    add_field => {
      "[@metadata][application]" => "my-application"
      "environment" => "development"
    }
  }
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "application-logs-%{+YYYY.MM.dd}"
  }

  # Для отладки - вывод в консоль
  stdout {
    codec => rubydebug
  }
}
